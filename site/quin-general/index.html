<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Quin-general - LetsCheck documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Quin-general";
        var mkdocs_page_input_path = "quin-general.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> LetsCheck documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../deployment-overview/">Overview</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../letscheck-website/">LetsCheck website</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Twatch</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../twatch/">Application</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../twatch-crawler/">Crawler</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Quin</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../quin-covid/">Quin-COVID</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Quin-general</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#quick-start">Quick start</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#set-up-from-scratch">Set up from scratch</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#setting-up-the-gpu">Setting up the GPU</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../api-request-handling/">API request handling</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">LetsCheck documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Quin</li>
      <li class="breadcrumb-item active">Quin-general</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="quin-general">Quin-general</h1>
<p>This is modified from <a href="https://github.com/algoprog/Quin">Quin+</a>.</p>
<p>The Quin-general backend model currently runs on A6000 workstation. </p>
<h2 id="quick-start">Quick start</h2>
<p>The Quin-general process is currently managed as a systemd service, with the script located at <code>/etc/systemd/system/quin-general.service</code>.</p>
<p>To check if Quin-general is running, run the following command:</p>
<pre><code class="language-bash">sudo systemctl status quin-general.service
</code></pre>
<p>If it is not running, you can start the service by running:</p>
<pre><code class="language-bash">sudo systemctl restart quin-general.service
</code></pre>
<p>To run the script directly for testing, change the directory to then run <code>python quin_web.py --mode=serve</code></p>
<h2 id="set-up-from-scratch">Set up from scratch</h2>
<ol>
<li>Download the encoder model from <a href="https://drive.google.com/file/d/1qsDPreap_26mL3UFDEyVPoe9ygbniLx9/view?usp=sharing">here</a> or NUS Dropbox and put it under <code>models/weights/encoder</code></li>
<li>Download the NLI model from <a href="https://drive.google.com/file/d/15Txw44izeEHCzzXIpxwVXFvNz_-_kng-/view?usp=sharing">here</a> and put it under <code>models/weights/nli</code></li>
<li>Download the passage ranking model from <a href="https://drive.google.com/file/d/1D0cGpM2uDMWmnYmF35Tbuv0Z_yE4l0U8/view?usp=sharing">here</a> and put it under <code>models/weights/passage_ranker</code></li>
<li>Run <code>pip install -r backend/requirements.txt</code></li>
</ol>
<h3 id="setting-up-the-gpu">Setting up the GPU</h3>
<p>In <code>backend/quin_web.py</code> you can find the following line:</p>
<p><code>os.environ["CUDA_VISIBLE_DEVICES"] = "..."</code></p>
<p>Depending on which GPUs are available on the machine, you should set this variable to at least one avaiable GPU id. One GPU is sufficient to run the system. For example, if GPU number 3 is available then you can set it as follows:</p>
<p><code>os.environ["CUDA_VISIBLE_DEVICES"] = "3"</code></p>
<p>A nice way to check the availability of the GPUs is using the <code>gpustat</code> command. You can install this tool using pip:</p>
<p><code>pip install gpustat</code></p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../quin-covid/" class="btn btn-neutral float-left" title="Quin-COVID"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../api-request-handling/" class="btn btn-neutral float-right" title="API request handling">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../quin-covid/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../api-request-handling/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
